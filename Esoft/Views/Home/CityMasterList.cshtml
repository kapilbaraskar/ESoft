
@{
    ViewBag.Title = "CityMasterList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Page Heading -->
<div>
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">City Master</h1>
    </div>
</div>

<section>
    <div class="row" style="height: 600px;">
        @*code for Tree View*@
        <div class="col-lg-3 col-md-3 col-sm-3" style="background-color: #fff; box-shadow: 3px 3px 6px -3px rgba(0,0,0,0.7); ">
            <div>


                <div style="box-shadow: 0 6px 4px -4px rgba(0,0,0,0.4); ">
                    <div class="form-group form-check" style="padding-top: 3%; margin-bottom: 1.5%;">
                        <input type="checkbox" class="form-check-input" id="CheckRoute">
                        <label class="form-check-label" for="checkByRoute">By Route</label>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-9 col-lg-9 col-sm-9">
                            <select id="inputTreeCityMstState" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Choose...</option>
                                <option>...</option>
                            </select>
                        </div>
                        <div class="form-group col-md-3 col-lg-3 col-sm-3">
                            <button type="submit" class="btn btn-sm btn-primary" style="width: 100%;">Find</button>
                        </div>
                    </div>

                </div>

                <div class="CommonScroleStyle mt-1" style="height: 500px;overflow: scroll;overflow-x: hidden;">

                    <ul class="tree d-none">
                        <li>
                            <input type="checkbox" checked="checked" id="c1" />
                            <label class="tree_label" for="c1">Level 0</label>
                            <ul>
                                <li>
                                    <input type="checkbox" checked="checked" id="c2" />
                                    <label for="c2" class="tree_label">Level 1</label>
                                    <ul>
                                        <li><span class="tree_label">Level 2</span></li>
                                        <li><span class="tree_label">Level 2</span></li>
                                    </ul>
                                </li>
                                <li>
                                    <input type="checkbox" id="c3" />
                                    <label for="c3" class="tree_label">Looong level 1 <br />label text <br />with line-breaks</label>
                                    <ul>
                                        <li><span class="tree_label">Level 2</span></li>
                                        <li>
                                            <input type="checkbox" id="c4" />
                                            <label for="c4" class="tree_label"><span class="tree_custom">Specified tree item view</span></label>
                                            <ul>
                                                <li><span class="tree_label">Level 3</span></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>


                        <li>
                            <input type="checkbox" id="c5" />
                            <label class="tree_label" for="c5">Level 0</label>
                            <ul>
                                <li>
                                    <input type="checkbox" id="c6" />
                                    <label for="c6" class="tree_label">Level 1</label>
                                    <ul>
                                        <li><span class="tree_label">Level 2</span></li>
                                    </ul>
                                </li>
                                <li>
                                    <input type="checkbox" id="c7" />
                                    <label for="c7" class="tree_label">Level 1</label>
                                    <ul>
                                        <li><span class="tree_label">Level 2</span></li>
                                        <li>
                                            <input type="checkbox" id="c8" />
                                            <label for="c8" class="tree_label">Level 2</label>
                                            <ul>
                                                <li><span class="tree_label">Level 3</span></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>

                    <ul class="tree" id="City_TreeViewStructure"></ul>
                </div>
            </div>
        </div>

        <div class="col-lg-9 col-md-9 col-sm-9">
            <div style="background-color: #fff; padding: 1%; height: 100%; ">
                <form id="CityMstForm">
                    <div class="form-row " style="box-shadow: 3px 3px 6px -3px rgba(0,0,0,0.7); padding-top: 1.3%; ">
                        <div class="col-md-5">
                            <div class="form-group row pl-3">
                                <div class="form-check col-md-5">
                                    <input class="form-check-input" type="checkbox" id="BookingCityCheck">
                                    <label class="form-check-label" for="BookinCityCheck">
                                        Is Booking City
                                    </label>
                                </div>
                                <div class="form-check col-md-3">
                                    <input class="form-check-input" type="checkbox" id="RouteCheck">
                                    <label class="form-check-label" for="RouteCheck">
                                        Is Route
                                    </label>
                                </div>

                                <div class="form-group col-md-3">
                                    <input type="text" class="form-control form-control-sm" id="inputNo">
                                </div>

                            </div>

                        </div>
                        <div class="col-md-7">
                            <div class="form-group row">
                                <div class="row col-md-6">
                                    <label for="inputCityMstSrNo" class="col-md-4">SrNo.:- </label>
                                    <input type="text" class="form-control form-control-sm col-md-8" id="inputCityMstSrNo">
                                </div>
                                <div class="row col-md-6">
                                    <label for="inpuCityMstRefNo" class="col-md-4">Ref.No:- </label>
                                    <input type="text" class="form-control form-control-sm col-md-8" id="inputCityMstRefNo">
                                </div>

                            </div>

                        </div>

                    </div>
                    <div class="form-row mt-2">
                        <div class="form-group col-md-4">
                            <label for="inputCityMstName">City Name</label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstName">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstPinCode">Pin Code</label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstPinCode">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstState">State</label>
                            <select id="inputCityMstState" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select State</option>
                                
                            </select>
                        </div>

                    </div>

                    <div class="form-row mt-1">
                        <div class="form-group col-md-4">
                            <label for="inputCityMstDistrict">District</label>
                            <select id="inputCityMstDistrict" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select District</option>
                              
                            </select>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstParentCity">Parent City</label>
                            <select id="inputCityMstParentCity" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select Parent City</option>
                               
                            </select>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstDeliveryAt">Delivery At</label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstDeliveryAt">
                        </div>

                    </div>
                    <div class="form-row mt-1">
                        <div class="form-group col-md-4">
                            <label for="inputCityMstChargeUpTo">Charges Up To</label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstChargeUpTo">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstDfTransport">Df. Transport</label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstDfTransport">
                        </div>

                        <div class="form-group col-md-4">
                            <label for="inputCityMstBranchAc">Branch A/C</label>
                            <select id="inputCityMstBranchAc" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select Branch A/C</option>
                               
                            </select>
                        </div>

                    </div>
                    <div class="form-row mt-1">
                        <div class="form-group col-md-4">
                            <label for="inputCityMstBiltyCharg">Df. Bilty Charg</label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstBiltyCharg">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstDelComm">Df.Del. Comm% </label>
                            <input type="text" class="form-control form-control-sm" id="inputCityMstDelComm">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCityMstCityLocation">Location</label>
                            <select id="inputCityMstCityLocation" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select Location</option>
                                
                            </select>
                        </div>

                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label for="inputCityMstDfLocation">Df. To Location</label>
                            <select id="inputCityMstDfLocation" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select Df. Location</option>
                               
                            </select>
                        </div>

                        <div class="form-group col-md-4">
                            <label for="inputCityMstRoute">Route</label>
                            <select id="inputCityMstRoute" class="form-control form-control-sm CommonScroleStyle ">
                                <option selected>Select Route</option>                              
                            </select>
                        </div>

                    </div>
                    <div class="form-row mt-1 pl-3">
                        <div class="form-check col-md-2">
                            <input class="form-check-input" type="checkbox" id="CityMstIsMultRoutCheck">
                            <label class="form-check-label" for="CityMstIsMultRoutCheck">
                                Is Multi Route
                            </label>
                        </div>
                        <div class="form-check col-md-2">
                            <input class="form-check-input" type="checkbox" id="CityMstLockedCheck">
                            <label class="form-check-label" for="CityMstLockedCheck">
                                Locked
                            </label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-md-4 offset-8">
                            <div style="float:right">
                                @*<button type="submit" class="btn btn-primary">New</button>*@
                                <button type="submit" class="btn btn-primary" onclick="SaveCityMstData(this)">Save</button>
                                <button type="submit" class="btn btn-primary">Edit</button>
                                <button type="submit" class="btn btn-primary" onclick="ClearForm()">Clear</button>
                            </div>
                        </div>
                    </div>

                </form>
            </div>

        </div>
    </div>

</section>


<script src="~/Content/vendor/jquery/jquery.min.js"></script>
<script src="~/Content/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script>

    //=================Code For CityMaster Page=================
    var urlLink = 'http://localhost:10666/Api/'

    var LocalDataStorage = new Array();
    LocalDataStorage = JSON.parse(localStorage.LogingObj);

    $(document).ready(function () {
        getCityHiererchiView();
        GetCityMasterDropdownData();

    });

    function getCityHiererchiView() {
        console.log('Error')
        $.ajax({
            url: urlLink + 'ApiMaster/GetDataForCityMasterTreeView',
            type: "GET",
            dataType: "JSON",
            //data: { "Ind": '1', "PROJCODE": 'trpr' },
            contentType: "application/json; charset=utf-8",
            beforeSend: function (xhr) {
                xhr.setRequestHeader("DBNAME", sessionStorage.dbName);
            },
            success: function (data) {
                // //debugger;

                if (data.status == 1) {
                    //DashBoardData = []
                    data = data.message
                    //DashBoardData = data
                    DisplayCityTreeStructureData(data)
                }
                else {
                    console.log(error);
                    DisplayErroeMsg(data.message)
                    $("#loader").css("display", "none");
                }

            }
        });
    }


    var parentlistTreeView = new Array();
    var child_listTreeView = new Array();
    var sub_child_listTreeView = new Array();

    function first_level_listTreeView(menulist) {
        parentlistTreeView.splice(0, parentlistTreeView.length)  // To delete all data from array Which is already exist.
        for (var i = 0; i < menulist.length; i++) {
            if (menulist[i]["ParentId"] == 0) {
                parentlistTreeView.push(menulist[i]);
            }
        }
    }
    // this is for the second level or the second block
    function second_level_listTreeView(id, menulist) {

        child_listTreeView.splice(0, child_listTreeView.length);
        for (var j = 0; j < menulist.length; j++) {
            if (id == menulist[j]["ParentId"]) {
                child_listTreeView.push(menulist[j]);
            }
        }

    }
    //this is for the third level or the third block
    function third_level_listTreeView(id, menulist) {
        sub_child_listTreeView.splice(0, sub_child_listTreeView.length);

        for (var j = 0; j < menulist.length; j++) {
            if (id == menulist[j]["ParentId"]) {
                sub_child_listTreeView.push(menulist[j]);
            }
        }

    }

    var strTreeView = '';
    function DisplayCityTreeStructureData(Data) {
        var thirdlevelId = "0", secondlevelId = "0", firstlevelId = "0";
        $("#City_TreeViewStructure").html('');    //To Empty HTML Code Which is already exist
        first_level_listTreeView(Data);


        for (var i = 0; i < parentlistTreeView.length; i++) {
            second_level_listTreeView(parentlistTreeView[i]["CityId"], Data);  //In parentlistTreeView array data is available in the form of array of object.
            if (child_listTreeView.length > 0) {
                // strTreeView += '<li class="nav-item treeview admin ' + (((secondlevelId == "0" ? thirdlevelId : secondlevelId) == parentlistTreeView[i]["MnuId"]) ? 'menu-open' : '') + '">';
                strTreeView += '<li>';
                //strTreeView += '<input type="checkbox" checked="checked" id="c'+i+'" />'
                strTreeView += '<input type="checkbox"  id="c' + i + '" />';
                strTreeView += '<label class="tree_label ParentTreeViewCls" onclick="ParentTreeViewFun(this)" for= "c' + i + '">' + parentlistTreeView[i]["CityName"] + '</label>';

                //strTreeView += '<ul class="nav-link pt-0 hideshowUl treeview-menu" style ="display:' + (((secondlevelId == "0" ? thirdlevelId : secondlevelId) == parentlistTreeView[i]["MnuId"]) ? 'block;' : 'none;') + '">'
                strTreeView += '<ul>';
                for (var j = 0; j < child_listTreeView.length; j++) {
                    third_level_listTreeView(child_listTreeView[j]["CityId"], Data);
                    if (sub_child_listTreeView.length > 0) {
                        strTreeView += '<li>';
                        //strTreeView += '<input type="checkbox" checked="checked" id="b1' + j + '" />';
                        strTreeView += '<input type="checkbox" id="b1' + j + '" />';
                        strTreeView += '<label class="tree_label SubChildTreeViewCls" onclick="SubChildTreeViewFun(this)" for= "b1' + j + '"> ' + child_listTreeView[j]["CityName"] + '</label>';

                        //strTreeView += '<ul  class="nav-link pt-0 hideshowUl treeview-menu" style ="display:' + ((thirdlevelId == child_listTreeView[j]["MnuId"]) ? 'block;' : 'none;') + '">';
                        strTreeView += '<ul>';
                        for (var k = 0; k < sub_child_listTreeView.length; k++) {
                            var classnameNew = "";

                            strTreeView += '<li class="ChildTreeViewCls" onclick="ChildTreeViewFun(this)"><span>' + sub_child_listTreeView[k]["CityName"] + '</span></li>';
                        }
                        strTreeView += '</ul>';
                        strTreeView += '</li>';
                    }
                    else {

                        strTreeView += '<li>';

                        //strTreeView += '<input type="checkbox" checked="checked" id="b11'+j+'" />'
                        strTreeView += '<input type="checkbox" id="b11' + j + '" />';
                        strTreeView += '<label class="tree_label SubChildTreeViewCls" onclick="SubChildTreeViewFun(this)" for= "b11' + j + '"> ' + child_listTreeView[i]["CityName"] + '</label>';
                        strTreeView += '</li>';


                    }
                }
                strTreeView += '</ul>';
                strTreeView += '</li>';
            }
            else {
                var classnameNew = "";


                strTreeView += '<li>'
                //strTreeView += '<input type="checkbox" checked="checked" id="c'+i+'" />'
                strTreeView += '<input type="checkbox" id="c' + i + '" />';
                strTreeView += '<label class="tree_label ParentTreeViewCls" onclick="ParentTreeViewFun(this)" for= "c' + i + '"> ' + parentlistTreeView[i]["CityName"] + '</label>';

                strTreeView += '</li>'
            }
        }

        $("#City_TreeViewStructure").html(strTreeView)

    }

    //OnClick On Tree View Element 
    function ParentTreeViewFun(e) {
        $('.ParentTreeViewCls').removeClass('activeTreeView')
        e.classList.add('activeTreeView');
    }


    function SubChildTreeViewFun(e) {
        $('.SubChildTreeViewCls').removeClass('activeTreeView')
        e.classList.add('activeTreeView');
    }

    function ChildTreeViewFun(e) {
        $('.ChildTreeViewCls').removeClass('activeTreeView')
        e.classList.add('activeTreeView');
    }


    function GetCityMasterDropdownData() {
        $.ajax({
            url: urlLink + 'ApiMaster/GetDataForCityMasterDropDowns',
            type: "GET",
            dataType: "JSON",
            data: { "DfLocDetId": LocalDataStorage[0]['LocId'] },
            contentType: "application/json; charset=utf-8",
            beforeSend: function (xhr) {
                xhr.setRequestHeader("DBNAME", sessionStorage.dbName);
                xhr.setRequestHeader("UserCode", LocalDataStorage[0]['UserCode']);
                xhr.setRequestHeader("CampId", LocalDataStorage[0]['dfCompId']);
            },
            success: function (data) {
                debugger;

                if (data.status == 1) {
                    DashBoardData = []
                    data = data.message
                    //DashBoardData = data
                    DisplayCityDroupdownData(data)
                }
                else {
                    console.log(error);
                    DisplayErroeMsg(data.message)
                    $("#loader").css("display", "none");
                }

            }
        });
    }

    function DisplayCityDroupdownData(Data) {

        if (Data['mDist'].length > 0) {
            var data = new Array();
            const dropdown = $('#inputCityMstDistrict');
            data = Data['mDist']
            data.forEach(function (item) {
                dropdown.append($('<option>', {
                    value: item.DistId,
                    text: item.DistName
                }));
            });
        }
        else {

        }

        if (Data['mState'].length > 0) {
            var data = new Array();
            const dropdown = $('#inputCityMstState');
            data = Data['mState']
            data.forEach(function (item) {
                dropdown.append($('<option>', {
                    value: item.StateId,
                    text: item.StateName
                }));
            });
        }
        else {

        }


        if (Data['Route'].length > 0) {
            var data = new Array();
            const dropdown = $('#inputCityMstRoute');
            data = Data['Route']
            data.forEach(function (item) {
                dropdown.append($('<option>', {
                    value: item.CityId,
                    text: item.CityName
                }));
            });
        }
        else {

        }

        if (Data['mGlActMst'].length > 0) {
            var data = new Array();
            const dropdown = $('#inputCityMstBranchAc');
            data = Data['mGlActMst']
            data.forEach(function (item) {
                dropdown.append($('<option>', {
                    value: item.GlAcId,
                    text: item.GlName
                }));
            });
        }
        else {

        }

    }

    function SaveCityMstData(e) {
        var EntryMode = ''; var cityid = ''; var CityName = ''; var CtAlias = ''; var Zip = ''; var DefDocChrgs = ''; var usercode = ''; var DfTransport = '';
        var isRoute = ''; var isLocked = ''; var isStation = ''; var GlAcId = ''; var StateId = ''; var RouteId = ''; var DeliveryAt = '';
        var DeliveryAdd = ''; var ContactNo = ''; var ChargesUpTo = ''; var isMultiRoute = ''; var OrderNo = ''; var BusChg = ''; var Distance = '';
        var Catg = ''; var ParentId = ''; var CompId = ''; var LocId = ''; var DfToLocId = ''; var DefDelComPer = ''; var Remark = ''; var DistId = '';

        if (e.textContent == 'Save') {
            EntryMode = 1;
        }
        else if (e.textContent == 'Edit') {
            EntryMode = 2;
        }
        else if (e.textContent == 'Delete') {
            EntryMode = 3;

        }
        //cityid = $('#').val();

        CityName = $('#inputCityMstName').val();
        //CtAlias = $('#').val();
        Zip = $('#inputCityMstPinCode').val();
        DefDocChrgs = $('#inputCityMstBiltyCharg').val();
        //usercode = $('#').val();
        DfTransport = $('#inputCityMstDfTransport').val();
        isRoute = $('#RouteCheck').is(":checked"); //Checkbox
        isLocked = $('#CityMstLockedCheck').is(":checked");//Checkbox
        isStation = $('#BookingCityCheck').is(":checked");  //Checkbox
        GlAcId = $('#inputCityMstBranchAc').val();
        StateId = $('#inputCityMstState').val();
        RouteId = $('#inputCityMstRoute').val();
        DeliveryAt = $('#inputCityMstDeliveryAt').val();
        //DeliveryAdd = $('#').val();
        //ContactNo = $('#').val();
        ChargesUpTo = $('#inputCityMstChargeUpTo').val();
        isMultiRoute = $('#CityMstIsMultRoutCheck').is(":checked");//Checkbox
        OrderNo = $('#inputCityMstSrNo').val();
        //BusChg = $('#').val();
        //Distance = $('#').val();
        //Catg = $('#').val();
        ParentId = $('#inputCityMstParentCity').val();
        //CompId = $('#').val();
        LocId = $('#inputCityMstCityLocation').val();
        DfToLocId = $('#inputCityMstDfLocation').val();
        DefDelComPer = $('#inputCityMstDelComm').val();
        Remark = $('#inputCityMstRefNo').val();
        DistId = $('#inputCityMstDistrict').val();


        var JasonCityMstData = new Array();
        var obj = new Object();

        if (EntryMode != '') { obj["EntryMode"] = EntryMode } else { obj["EntryMode"] = '' }
        if (cityid != '') { obj["cityid"] = cityid } else { obj["cityid"] = '' }
        if (CityName != '') { obj["CityName"] = CityName } else { obj["CityName"] = '' }
        if (CtAlias != '') { obj["CtAlias"] = CtAlias } else { obj["CtAlias"] ='' }
        if (Zip != '') { obj["Zip"] = Zip } else { obj["Zip"] = '' }
        if (DefDocChrgs != '') { obj["DefDocChrgs"] = DefDocChrgs } else { obj["DefDocChrgs"] = '' }
        if (usercode != '') { obj["usercode"] = usercode } else { obj["usercode"] = '' }
        if (DfTransport != '') { obj["DfTransport"] = DfTransport } else { obj["DfTransport"] = '' }
        if (isRoute != '') { obj["isRoute"] = isRoute } else { obj["isRoute"] = '' }
        if (isLocked != '') { obj["isLocked"] = isLocked } else { obj["isLocked"] = '' }
        if (isStation != '') { obj["isStation"] = isStation } else { obj["isStation"] = '' }
        if (GlAcId != '' && GlAcId != 'Select Branch A/C') { obj["GlAcId"] = GlAcId } else { obj["GlAcId"] = '' }
        if (StateId != '' && StateId != 'Select State') { obj["StateId"] = StateId } else { obj["StateId"] = '' }
        if (RouteId != '' && RouteId != 'Select Route') { obj["RouteId"] = RouteId } else { obj["RouteId"] = '' }
        if (DeliveryAt != '') { obj["DeliveryAt"] = DeliveryAt } else { obj["DeliveryAt"] = '' }
        if (DeliveryAdd != '') { obj["DeliveryAdd"] = DeliveryAdd } else { obj["DeliveryAdd"] = '' }
        if (ContactNo != '') { obj["ContactNo"] = ContactNo } else { obj["ContactNo"] = '' }
        if (ChargesUpTo != '') { obj["ChargesUpTo"] = ChargesUpTo } else { obj["ChargesUpTo"] = '' }
        if (isMultiRoute != '') { obj["isMultiRoute"] = isMultiRoute } else { obj["isMultiRoute"] = '' }
        if (OrderNo != '') { obj["OrderNo"] = OrderNo } else { obj["OrderNo"] = '' }
        if (BusChg != '') { obj["BusChg"] = BusChg } else { obj["BusChg"] = '' }
        if (Distance != '') { obj["Distance"] = Distance } else { obj["Distance"] = '' }
        if (Catg != '') { obj["Catg"] = Catg } else { obj["Catg"] = '' }
        if (ParentId != '' && ParentId != 'Select Parent City') { obj["ParentId"] = ParentId } else { obj["ParentId"] = '' }
        if (CompId != '') { obj["CompId"] = CompId } else { obj["CompId"] = '' }
        if (LocId != '' && LocId != 'Select Location') { obj["LocId"] = LocId } else { obj["LocId"] = '' }
        if (DfToLocId != '' && DfToLocId != 'Select Df. Location') { obj["DfToLocId"] = DfToLocId } else { obj["DfToLocId"] = '' }
        if (DefDelComPer != '') { obj["DefDelComPer"] = DefDelComPer } else { obj["DefDelComPer"] = '' }
        if (Remark != '') { obj["Remark"] = Remark } else { obj["Remark"] = '' }
        if (DistId != '' && DistId != 'Select District') { obj["DistId"] = DistId } else { obj["DistId"] = '' }


        JasonCityMstData.push(obj);


        $.ajax({
            url: urlLink + 'ApiMaster/SaveCityMasterData',
            type: "POST",
            dataType: "JSON",
            data:JSON.stringify(obj) ,
            contentType: "application/json; charset=utf-8",
            async:false,
            beforeSend: function (xhr) {
                xhr.setRequestHeader("DBNAME", sessionStorage.dbName);
                xhr.setRequestHeader("UserCode", LocalDataStorage[0]['UserCode']);
                xhr.setRequestHeader("CompId", LocalDataStorage[0]['dfCompId']);
            },
            success: function (data) {
                debugger;

                if (data.status == 1) {
                    $('#CityMstForm')[0].reset();
                    data = data.message
                    //alert(data)
                    //DashBoardData = data
                    DisplaySeccessMsg(data)
                }
                else {
                   
                    DisplayErroeMsg(data.message)
                    $("#loader").css("display", "none");
                }

            }
        });
    }

    function ClearForm() {
        $('#CityMstForm')[0].reset();
    }

    //=================END===========================



</script>